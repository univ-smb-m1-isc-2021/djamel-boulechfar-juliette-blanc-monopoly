package monopoly;

public class RueExploitee extends EtatRue {
	
	// Attributs
	private Rue rue;
	
	// Constructeurs
	public RueExploitee() {}
	
	public RueExploitee(Rue rue) {
		this.rue = rue;
		this.rue.setEtatRue(this);
		Joueur proprietaire = this.rue.getProprietaire();
		proprietaire.debiterSolde(200);
		this.rue.ajouterBatiment();
	}
	
	// Méthodes
	
	/* Getters et setters */
	public Rue getRue() {
		return rue;
	}

	public void setRue(Rue rue) {
		this.rue = rue;
	}
	/* ------------------ */
	
	@Override
	public void joueurArrive(Joueur joueur) {
		Joueur proprietaire = this.rue.getProprietaire();
		if(joueur != proprietaire) {
			int loyer = this.rue.calculeLoyer();
			System.out.println("Cette rue appartient à " + proprietaire.getNom() + ".");
			System.out.println(proprietaire.getNom() + " possède le quartier dans laquelle la rue se trouve, de plus il a construit des batîments dessus (" + this.rue.getNbMaisons() + " maison(s) et " + this.rue.getNbHotels() + " hotel(s)). Après calcul, " + joueur.getNom() + " paie le loyer de " + loyer + "M.");
			joueur.debiterSolde(loyer);
			proprietaire.crediterSolde(loyer);
		} else {
			System.out.println("Cette case vous appartient.");
		}
	}

	@Override
	public void joueurAchete(Joueur joueur) {
		System.out.println("Achat impossible car cette rue a déjà été achetée.");
	}
	
	@Override
	public void construire(Joueur joueur) {
		Joueur proprietaire = this.rue.getProprietaire();
		if (joueur == proprietaire) {
			if (joueur.verifieSoldeSuffisant(200)) {
				joueur.debiterSolde(200);
				this.rue.ajouterBatiment();
			} else {
				System.out.println("Vous n'avez pas la somme requise (200M) pour construire, vous n'avez pas été débité. Votre solde : " + joueur.getSolde() + "M.");
			}
		} else {
			System.out.println("Erreur sur la construction, vous  n'êtes pas le propriétaire de la rue.");
		}
	}

}